<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=0"
    />
    <title>CampusConnect - Students</title>

    <link rel="shortcut icon" href="/assets/img/favicon.png" />

    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;0,900;1,400;1,500;1,700&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="/assets/plugins/bootstrap/css/bootstrap.min.css"
    />

    <link rel="stylesheet" href="/assets/plugins/feather/feather.css" />

    <link rel="stylesheet" href="/assets/plugins/icons/flags/flags.css" />

    <link
      rel="stylesheet"
      href="/assets/plugins/fontawesome/css/fontawesome.min.css"
    />
    <link rel="stylesheet" href="/assets/plugins/fontawesome/css/all.min.css" />

    <link
      rel="stylesheet"
      href="/assets/plugins/datatables/datatables.min.css"
    />

    <link rel="stylesheet" href="/assets/css/style.css" />
  </head>
  <body>
    <div class="main-wrapper">
        <div class="header">
            <div class="header-left">
              <a href="index.html" class="logo">
                <img src="/assets/img/logo.png" alt="Logo" />
              </a>
              <a href="" class="logo logo-small">
                <img
                  src="/assets/img/logo-small.png"
                  alt="Logo"
                  width="30"
                  height="30"
                />
              </a>
            </div>
    
            <div class="menu-toggle">
              <a href="javascript:void(0);" id="toggle_btn">
                <i class="fas fa-bars"></i>
              </a>
            </div>
    
            <div class="top-nav-search">
              <form>
                <input type="text" class="form-control" placeholder="Search here" />
                <button class="btn" type="submit">
                  <i class="fas fa-search"></i>
                </button>
              </form>
            </div>
    
            <a class="mobile_btn" id="mobile_btn">
              <i class="fas fa-bars"></i>
            </a>
    
            <ul class="nav user-menu">
    
              <li class="nav-item zoom-screen me-2">
                <a href="#" class="nav-link header-nav-list">
                  <img src="assets/img/icons/header-icon-04.svg" alt="" />
                </a>
              </li>
    
              <li class="nav-item dropdown has-arrow new-user-menus">
                <a
                  href="#"
                  class="dropdown-toggle nav-link"
                  data-bs-toggle="dropdown"
                >
                  <span class="user-img">
                    <img
                      class="rounded-circle"
                      src="/assets/img/profiles/avatar-01.jpg"
                      width="31"
                      alt="Rithwik"
                    />
                    <div class="user-text">
                      <h6><%= staff.username %></h6>
                      <p class="text-muted mb-0">Staff</p>
                    </div>
                  </span>
                </a>
                <div class="dropdown-menu">
                  <div class="user-header">
                    <div class="avatar avatar-sm">
                      <img
                        src="/assets/img/profiles/avatar-01.jpg"
                        alt="User Image"
                        class="avatar-img rounded-circle"
                      />
                    </div>
                    <div class="user-text">
                      <h6><%= staff.username %></h6>
                      <p class="text-muted mb-0">Staff</p>
                    </div>
                  </div>
                  <a class="dropdown-item" href="/profile">My Profile</a>
                  <!-- <a class="dropdown-item" href="inbox.html">Inbox</a> -->
                  <a class="dropdown-item" href="/login">Logout</a>
                </div>
              </li>
            </ul>
          </div>
    
          <div class="sidebar" id="sidebar">
            <div class="sidebar-inner slimscroll">
              <div id="sidebar-menu" class="sidebar-menu">
                <ul>
                    <li class="menu-title">
                        <span>Main Menu</span>
                    </li>
                    <li class="submen ">
                        <a href="/staff/dashboard"><i class="feather-grid"></i> <span> Dashboard</span> <span
                                class="menu-arrow"></span></a>
                        <!-- <ul>
                            <li><a href="index.html" >Admin Dashboard</a></li>
                            <li><a href="teacher-dashboard.html" class="active">Teacher Dashboard</a></li>
                            <li><a href="student-dashboard.html">Student Dashboard</a></li>
                        </ul> -->
                    </li>
                    <li class="submen ">
                        <a href="/staff/studentDashboard"><i class="fas fa-graduation-cap"></i> <span> Students</span> <span
                                class="menu-arrow"></span></a>
                        <!-- <ul>
                            <li><a href="students.html">Student List</a></li>
                            <li><a href="student-details.html">Student View</a></li>
                            <li><a href="add-student.html" >Student Add</a></li>
                            <li><a href="edit-student.html">Student Edit</a></li>
                        </ul> -->
                    </li>
                    <li class="submen active">
                        <a href="/staff/attendance"><i class="fas fa-chalkboard-teacher"></i> <span> Attendance</span> <span
                                class="menu-arrow"></span></a>
                        <!-- <ul>
                            <li><a href="teachers.html">Teacher List</a></li>
                            <li><a href="teacher-details.html">Teacher View</a></li>
                            <li><a href="add-teacher.html">Teacher Add</a></li>
                            <li><a href="edit-teacher.html">Teacher Edit</a></li>
                        </ul> -->
                    </li>
                    <li class="submen">
                        <a href="/staff/departmentDashboard"><i class="fas fa-building"></i> <span> Departments</span> <span
                                class="menu-arrow"></span></a>
                        <!-- <ul>
                            <li><a href="departments.html">Department List</a></li>
                            <li><a href="add-department.html">Department Add</a></li>
                            <li><a href="edit-department.html">Department Edit</a></li>
                        </ul> -->
                    </li>
                    <!-- <li class="submen">
                        <a href="#"><i class="fas fa-book-reader"></i> <span> Reportings</span> <span
                                class="menu-arrow"></span></a>
                        
                    </li> -->
                    <li>
                        <a href="/staff/vehicleDashboard"><i class="fas fa-holly-berry"></i> <span>Vehicles</span></a>
                    </li>
                    <li>
                        <a href="/staff/eventDashboard"><i class="fas fa-calendar-day"></i> <span>Events</span></a>
                    </li>
                    <li class="">
                <a href="/staff/community"
                  ><i class="fas fa-users"></i> <span>Community</span></a
                >
              </li>
                </ul>
            </div>
            </div>
          </div>

      <div class="page-wrapper">
        <div class="content container-fluid">
          <div class="page-header">
            <div class="row">
              <div class="col-sm-12">
                <div class="page-sub-header">
                  <h3 class="page-title">Attendance</h3>
                  <ul class="breadcrumb">
                    <li class="breadcrumb-item">
                      <a href="#">Attendance</a>
                    </li>
                    <li class="breadcrumb-item active">All Students</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <!-- <div class="student-group-form">
            <div class="row">
              <div class="col-lg-3 col-md-6">
                <div class="form-group">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Search by ID ..."
                  />
                </div>
              </div>
              <div class="col-lg-3 col-md-6">
                <div class="form-group">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Search by Name ..."
                  />
                </div>
              </div>
              <div class="col-lg-4 col-md-6">
                <div class="form-group">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Search by Phone ..."
                  />
                </div>
              </div>
              <div class="col-lg-2">
                <div class="search-student-btn">
                  <button type="btn" class="btn btn-primary">Search</button>
                </div>
              </div>
            </div>
          </div> -->
          <div class="row">
            <div class="col-sm-12">
              <div class="card card-table comman-shadow">
                <div class="card-body">
                  <div class="page-header">
                    <div class="row align-items-center">
                      <div class="col">
                        <h3 class="page-title">Attendance</h3>
                      </div>
                      <div
                        class="col-auto text-end float-end ms-auto download-grp"
                      >
                        <a href="#" class="btn btn-outline-gray me-2 active"
                          ><i class="feather-list"></i
                        ></a>
                        <!-- <a href="/staff/addStudent" class="btn btn-primary"
                          ><i class="fas fa-plus"></i
                        ></a> -->
                      </div>
                    </div>
                  </div>

                  <div class="table-responsive">
                    <table class="table border-0 star-student table-hover table-center mb-0 table-striped">
                      <thead class="student-thread">
                        <tr>
                          <th>ID</th>
                          <th>Name</th>
                          <th>Semester</th>
                          <th>Username</th>
                          <th>Email</th>
                          <th>Mobile Number</th>
                          <th class="text-end">Attendance</th>
                          <th class="text-end">Is Late</th>
                        </tr>
                      </thead>
                      <tbody>
                        <% students.forEach(function(student) { %>
                        <tr>
                          <td><%= student.enrollmentNumber || 'N/A' %></td>
                          <td>
                            <h2 class="table-avatar">
                              <a href="#"><%= student.fullName %></a>
                            </h2>
                          </td>
                          <td>
                            <%= student.semester ? `Sem ${student.semester}` : 'N/A' %>
                          </td>
                          <td><%= student.user?.username %></td>
                          <td><%= student.user?.email || 'N/A' %></td>
                          <td><%= student.contactNumber || 'N/A' %></td>
                          <td class="text-end">
                            <div class="actions">
                              <form action="/staff/attendance/present" method="POST" style="display:inline;">
                                <input type="hidden" name="studentId" value="<%= student.userId %>" />
                                <input type="hidden" name="date" value="<%= new Date().toISOString().split('T')[0] %>" />
                                
                                <button type="submit" class="btn btn-sm bg-success-light me-2" title="Mark Present">
                                  <i class="feather-check"></i>
                                </button>
                              </form>
                              <form action="/staff/attendance/absent" method="POST" style="display:inline;">
                                <input type="hidden" name="studentId" value="<%= student.userId %>" />
                                <input type="hidden" name="date" value="<%= new Date().toISOString().split('T')[0] %>" />
                                
                                <button type="submit" class="btn btn-sm bg-danger-light me-2" title="Mark Absent">
                                  <i class="feather-x"></i>
                                </button>
                              </form>
                              
                            </div>
                          </td>
                          <td class="text-end">
                            <div class="actions">
                              <form action="/staff/attendance/late" method="POST" style="display:inline;">
                                <input type="hidden" name="studentId" value="<%= student.userId %>" />
                                <input type="hidden" name="date" value="<%= new Date().toISOString().split('T')[0] %>" />
                                
                                <button type="submit" class="btn btn-sm bg-success-light me-2" title="Mark Present">
                                  <i class="feather-check"></i>
                                </button>
                              </form>
                              <!-- <form action="/staff/attendance/absent" method="POST" style="display:inline;">
                                <input type="hidden" name="studentId" value="<%= student.userId %>" />
                                <input type="hidden" name="date" value="<%= new Date().toISOString().split('T')[0] %>" />
                                
                                <button type="submit" class="btn btn-sm bg-danger-light me-2" title="Mark Absent">
                                  <i class="feather-x"></i>
                                </button>
                              </form> -->
                              
                            </div>
                          </td>
                        </tr>
                        <% }); %>
                      </tbody>
                    </table>
                  </div>          
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="/assets/js/jquery-3.6.0.min.js"></script>

    <script src="/assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script src="/assets/js/feather.min.js"></script>

    <script src="/assets/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <script src="/assets/plugins/datatables/datatables.min.js"></script>

    <script src="/assets/js/script.js"></script>
  </body>
</html>
